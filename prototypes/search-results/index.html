<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="ENM">
  <title>ENM Search Results - Prototype</title>
  <link rel="stylesheet" href="font-awesome-4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="css/bulma.css">
  <link rel="stylesheet" href="css/search-results.css">

  <script src="js/lodash-4.17.4.js"></script>
  <script src="js/axios-v0.17.0.min.js"></script>
  <script src="js/vue-2.5.2.js"></script>
  <script src="js/d3.v4.min.js"></script>
  <script src="js/d3-tip.js"></script>
</head>

<body>

<div id="app">

  <!-- BANNER -->

  <div class="enm-topnav">
    <div class="container ">
      <nav class="navbar is-transparent">
        <div class="navbar-brand">
          <h1 class="navbar-item enm-logo">
            <a href="https://jira.nyu.edu/jira/browse/NYUP-320">
              Enhanced Networked Monographs
            </a>
          </h1>
          <div class="navbar-burger burger" data-target="navMenuIndex">
            <span></span>
            <span></span>
            <span></span>
          </div>
        </div>
        <div id="navMenuIndex" class="navbar-menu">
          <div class="navbar-start">
            <div class="navbar-item has-dropdown is-hoverable">
              <a class="navbar-link  " href="#">
                Browse
              </a>
              <div class="navbar-dropdown is-boxed">
                <div class="navbar-item">
                  <div>
                    <p class="is-size-6-desktop">
                      <strong>Featured Topics</strong>
                    </p>
                    <a class="navbar-item" href="#">Women</a>
                    <a class="navbar-item" href="#">Art</a>
                    <a class="navbar-item" href="#">Food</a>
                  </div>
                </div>
                <hr class="navbar-divider">
                <a class="navbar-item " href="#">
                  All topics
                </a>
                <a class="navbar-item " href="https://bulma.io/documentation/modifiers/syntax/">
                  All books
                </a>
                <a class="navbar-item " href="#">
                  All Publishers
                </a>
              </div>
            </div>
            <div class="navbar-item has-dropdown is-hoverable">
              <div class="navbar-link">
                Visualize
              </div>
              <div id="moreDropdown" class="navbar-dropdown is-boxed">
                <a class="navbar-item " href="#">
                  <p>
                    <strong>Persons</strong>
                    <br>
                    <small>A nicely laid out description of this item </small>
                  </p>
                </a>
                <hr class="navbar-divider">
                <a class="navbar-item " href="#">
                  <p>
                    <strong>Places</strong>
                    <br>
                    <small>A nicely laid out description of this item </small>
                  </p>
                </a>
                <hr class="navbar-divider">
                <a class="navbar-item " href="#">
                  <p>
                    <strong>Things</strong>
                    <br>
                    <small>A nicely laid out description of this item </small>
                  </p>
                </a>
              </div>
            </div>
          </div>
        </div>
      </nav>
    </div>
  </div>

  <!-- BANNER -->

  <hr class="is-marginless">

  <main class="enm-searchpage">
    <div class="container">

      <!--SEARCH FORM-->
      <form class="enm-searchform" v-on:submit.prevent="sendSearchQuery">
        <div class="columns is-centered">
          <div class="column is-three-quarters enm-searchbox">
            <div class="columns level">
              <div class="column level-item">
                <p class="control has-icons-left">
                  <input class="input is-large"
                         type="text"
                         placeholder="Search all books"
                         v-model="query">
                  <span class="icon is-small is-left"><i class="fa fa-search"></i></span>
                </p>
              </div>

              <div class="column is-narrow">

                <template v-for="queryField in queryFields">
                  <input type="checkbox" class="is-medium is-checkbox"
                         v-bind:name="queryField.name + 'Chx'"
                         v-bind:id="queryField.name + 'Chx'"
                         v-bind:id="queryField.id"
                         v-on:click="clickFieldCheckbox( $event.checked )"
                         v-bind:value="queryField.value"
                         v-model="selectedQueryFields">
                  <label v-bind:for="queryField.name + 'Chx'" class="">
                    {{ queryField.label }}
                  </label>
                </template>

              </div>
            </div>
          </div>
        </div>
      </form>
      <!--SEARCH FORM-->

      <!--SEARCH ECHO-->
      <div class="columns enm-searchecho">
        <div class="column is-2">&nbsp;
        </div>
        <div class="column">
          <span class="tag" v-for="searchTag in searchTags">
            {{ searchTag }}
            <button class="delete is-small"></button>
          </span>
        </div>
      </div>
      <hr class="enm-hr">
      <!--SEARCH ECHO-->

      <div v-cloak>

      <div class="columns enm-panes">
        <div class="column enm-pane enm-pane-facets is-2">

          <!--FACETS-->
          <div class="content" v-show="displayFacetPane">
            <h2 class="enm-pane-heading is-size-5">Limit by Topic</h2>
            <div class="enm-facets-list">

              <a href="#" v-for="topic in topicFacetList">
              {{ topic }}
              </a>

            </div>
          </div>
          <!--FACETS-->

        </div>
        <div class="column enm-pane enm-pane-results is-4">

          <!--RESULTS-->
          <template v-show="displayResultsPane">
          <!-- v-show is necessary on this <header> element for some reason.
               Its visibility is not being toggled along with the other elements
               in this <template>.
          -->
          <header v-show="displayResultsPane">
            <h2 class="is-size-4">Results: {{ numPages}} pages in {{ numBooks }} Books</h2>
            <div class="control field is-pulled-right">
              <div class="select">
                <select>
                  <option>Relevance</option>
                  <option>Title</option>
                  <option>Date: Recent</option>
                  <option>Date: Earliest</option>
                </select>
              </div>
            </div>
          </header>
          <div class="enm-results" v-show="displayResultsPane">

            <!--BOOK-->
            <div class="box" v-for="result in results">
              <article class="media enm-book">
                <div class="media-left">
                  <figure class="image is-64x64">
                    <!--<img src="https://bulma.io/images/placeholders/128x128.png" alt="Image">-->
                    <img v-bind:src="'http://openaccessbooks-dev.nyupress.org/oabooks-reader/epub_content/' + result.groupValue + '/ops/images/' + result.groupValue + '-th.jpg'" alt="Image">
                  </figure>
                </div>
                <div class="media-content">
                  <!-- da70 Here, the link to load the preview is repeated.  THe first one is for fancy "whole div" rollovrers and the second is for accessibility.  Not sure how this will work with vue.js  -->
                  <a class="enm-divlink" href="#">&nbsp;</a>
                  <h3 class="title is-spaced"><a href="#">{{ result.doclist.docs[ 0 ].title }}</a></h3>
                  <div class="subtitle">[ SUBTITLE ]</div>
                  <div class="meta">
                    {{ result.doclist.docs[ 0 ].authors.join( '; ' )  +
                       '; ' +
                       result.doclist.docs[ 0 ].publisher +
                       ', ' +
                       '[ YEAR ]' }}
                  </div>
                  <div class="matches">
                    {{ result.doclist.numFound }} matched pages
                  </div>
                </div>
              </article>
            </div>
            <!--BOOK-->

          </div>
          </template>
          <!--RESULTS-->

        </div>
        <div class="column enm-pane enm-pane-preview" v-show="displayPreviewPane">

          <!--PREVIEW-->
          <div>
            <header>
              <div class="enm-pageno">page 21</div>
              <h2 class="title is-spaced">The Transformation of Rage</h2>
              <div class="subtitle">Mourning and Creativity in George Eliot's Fiction</div>
            </header>
            <img src="chart2.svg">
            <div class="enm-buttons">
              <a href="#" class="button" title="View previous matched page in this book">
                < previous </a>
              <a href="#" class="button" title="View next matched page in this book">next ></a>
            </div>
            <div class="enm-topicsonthispage">
              <h3>Topics on this page</h3>
              <a href="#">
                <mark>Eliot</mark>, George, writings -- "Janet's Repentance" </a>
              <a href="#">
                <mark>Eliot</mark>, George, writings -- Adam Bede </a>
              <a href="#">
                <mark>Eliot</mark>, George, writings -- Silas Marner </a>
              <a href="#">
                <mark>Eliot</mark>, George, writings -- The Mill on the Floss </a>
            </div>
            <hr>
            <div class="enm-pageText">real Janet alas! had a far sadder end than mine" (347). At this point, Lewes added (in a separate letter) his opinion that "I was in raptures with 'Janet’s Repentance' when
              <mark>Eliot</mark> first read it to me and declared it to be the finest thing he had written" (351). Blackwood responded, characteristically, with reassurance (352). Yet when he ventured still another criticism of a scene in "Janet’s Repentance," Lewes, revealing what turned out to be a lifelong tendency to protect
              <mark>Eliot</mark> from criticism, finally wrote, "Entre nous let me hint that unless you have any serious objection to make to
              <mark>Eliot</mark>’s stories, don't make any. He is so easily discouraged, so diffident of himself, that not being prompted by necessity to write, he will close the series in the belief that his writing is not relished. . . . Don’t allude to this hint of mine. He wouldn’t like my interfering" (363–64). Although the next letter from Blackwood expresses admiration for the ending of "Janet’s Repentance" (371),
              <mark>Eliot</mark> apparently still rankled from his earlier criticism. As she recorded in her journal, "I had meant to carry on the series beyond 'Janet’s Repentance,' . . . but my annoyance at Blackwood’s want of sympathy in the first two parts of 'Janet,' . . . determined me to close the series and republish them in two volumes" (410). Despite their tentative beginnings,
              <mark>Eliot</mark>, Blackwood, and Lewes nonetheless developed a good working relationship over the years that followed. Blackwood was still
              <mark>Eliot</mark>’s editor, except for a short rift over the publication of Romola, when she wrote her last novel, Daniel Deronda. George
              <mark>Eliot</mark> was paid generously for her fiction. After 1857, she and Lewes, who was also doing well with his publications, no longer had to worry about money, and
              <mark>Eliot</mark> was able to give up her article writing. Scenes of Clerical Life was well received in literary circles, and although there were only three reviews, they were encouraging (Laski 55). With the publication of Adam Bede,
              <mark>Eliot</mark>’s reputation was established. Her early fiction, which was drawn largely from a combination of various elements of memory and imagination, became less literally based on figures from the past after the Scenes as she began to make rapid progress in her artistic technique. Her early works were also rapidly composed. Scenes of Clerical Life was completed in only a little over a year, as was each of the long novels, Adam Bede and The Mill on the Floss. The short novel, Silas Marner, proved to be a transitional work, written as
              <mark>Eliot</mark> was beginning to move toward the writing of her more complex novels,</div>
          </div>
          <!--PREVIEW-->

        </div>
      </div>

      <!--v-cloak-->
      </div>

    </div>
  </main>

  <!--FOOTER-->
  <footer role="contentinfo">
    <hr class="is-marginless">
    <p class="is-centered">Footer text here <p>
  </footer>
  <!--FOOTER-->

</div>

  <script src="js/search-results.js"></script>
</body>

</html>